import sys
sys.path.append("../src")
import unittest
import adsb

class AdsbTests(unittest.TestCase):
    def testShouldRetrieveAircraftAddress(self):
        airborne_details_binary_message = "1000111110100010101111001101110101011000101011111000011100000100000100111000111010111101001110101000010000000101"
        self.assertEqual(adsb._icao_aircraft_address(airborne_details_binary_message), "A2BCDD")

    def testShouldRetrieveFlightNumber(self):
        aircraft_id_binary_messages = [
            ("1000110110100010101111001101110100100101000001000001001100110111110001111001100000100000101000111010000001101101", "AAL719"),
            ("1000110101000000000001010100110100100000000010000001010111110010110111110001100000100000101110001100010101000110", "BAW271"),
            ("1000110101000000011010111000111100100000000101011010011001110010111000001110001011100000101101000110011010011000", "EZY28NK"),
            ("1000110101000000011011001101001000100000000101011010011001111000110010001100001000100000011100000110100101110110", "EZY82LH"),
            ("1000110111000000010110001100000000100101000001000011000001111000110101110001100000100000011010010100010000011110", "ACA851"),
            ("1000110101000111000111111001000100100000010111011010011010110110100000100000100000100000111011111001100110101111", "WZZ6")
        ]

        for aircraft_id_binary_message, flight in aircraft_id_binary_messages:
            self.assertEqual(adsb.flight_number(aircraft_id_binary_message), flight)

def main():
    unittest.main()

if __name__ == '__main__':
    main()
